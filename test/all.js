/// <reference path="../typings/tsd.d.ts" />
/// <reference path="../src/ts/fromJS.d.ts" />
/// <reference path="../src/ts/ast.ts" />
/// <reference path="../src/ts/symbols.ts" />
/// <reference path="../src/ts/util.ts" />
/// <reference path="../src/ts/semantics.ts" />
function fail(message) {
    ok(false, message);
}
QUnit.module("Grunt");
test("generated files exist", function () {
    ok(okTests);
});
QUnit.module("Parser");
test("the base function exists", function () {
    ok(vees);
});
test("parser exists", function () {
    ok(vees.parser);
});
test("parser.parse exists", function () {
    ok(vees.parser.parse);
});
QUnit.module("OKTests");
okTests.forEach(function (file__content) {
    test("Parsing " + file__content.filename, function () {
        try {
            vees.parser.parse(file__content.content);
            ok(true);
        }
        catch (e) {
            fail(e.message + "\nLine: " + e.line + "\nColumn: " + e.column);
        }
    });
});
var astTests = [
    [
        "True parses",
        "Expression",
        "True",
        {
            value: true,
            start: { offset: 0 },
            end: {},
        },
    ],
    [
        "False parses",
        "Expression",
        "False",
        {
            __instanceof: eiffel.ast.BooleanLiteral,
            value: false,
            start: {},
            end: { offset: 5 },
        },
    ],
    [
        "1 parses",
        "Expression",
        "1",
        {
            value: 1,
            start: {},
            end: {},
        },
    ],
    [
        "'1' parses",
        "Expression",
        "'1'",
        {
            value: "1",
            start: {},
            end: {},
        },
    ],
    [
        "%n parses",
        "Expression",
        '"%n%""',
        {
            value: '%n%"',
            start: {},
            end: {},
        },
    ],
    [
        "Void parses",
        "Expression",
        'Void',
        {
            start: {},
            end: {},
        },
    ],
];
function compareAst(expected, actual) {
    var noDifferences = true;
    var differences = [];
    function compare(expected, actual, query) {
        function diff() {
            var params = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                params[_i - 0] = arguments[_i];
            }
            noDifferences = false;
            differences.push({ query: query, params: params });
        }
        if (expected === actual) {
            return;
        }
        if (expected === null && actual !== null) {
            diff("expected is null, actual is not", actual);
        }
        if (expected !== null && actual == null) {
            diff("actual is null when it should have been", actual);
            return;
        }
        if (typeof expected !== typeof actual) {
            diff("different types", "typeof expected " + typeof expected, "typeof actual " + typeof actual);
            return;
        }
        if (Array.isArray(expected)) {
            if (!Array.isArray(actual)) {
                diff("expected is object, actual is not", actual);
                return;
            }
            // both are arrays
            if (expected.length > actual.length) {
                diff("expected is longer", "expected: " + expected.length, "actual: " + actual.length);
                return false;
            }
            expected.forEach(function (x, x_i) {
                compare(x, actual[x_i], query + "[" + x_i + "]");
            });
        }
        if (typeof expected === 'object') {
            for (var key in expected) {
                if (expected.hasOwnProperty(key)) {
                    if (key === "__instanceof") {
                        if (!(actual instanceof expected[key])) {
                            diff("actual has wrong type");
                        }
                    }
                    else {
                        if (actual.hasOwnProperty(key)) {
                            compare(expected[key], actual[key], query + "[" + key + "]");
                        }
                        else {
                            diff("actual is missing key " + key);
                        }
                    }
                }
            }
            return;
        }
        else {
            diff("different values", "Expected: ", expected, "Actual ", actual);
            return;
        }
        diff("unknown difference");
    }
    compare(expected, actual, "this");
    if (differences.length) {
        return function () {
            differences.forEach(function (d) {
                console.group(d.query);
                console.error.apply(console, d.params);
                console.groupEnd();
            });
        };
    }
    else {
        return null;
    }
}
function okAst(errorFunction) {
    if (errorFunction) {
        errorFunction();
        ok(false, "AST was not equal");
    }
    else {
        ok(true);
    }
}
function nokAst(errorFunction) {
    if (errorFunction) {
        ok(true);
    }
    else {
        errorFunction();
        ok(false, "AST was not equal");
    }
}
QUnit.module("AST comparison function");
test("should work for empty objects", function () {
    okAst(compareAst({}, {}));
});
test("should work for single values", function () {
    okAst(compareAst({ a: 2 }, { a: 2 }));
    nokAst(compareAst({ a: 3 }, { a: 2 }));
    nokAst(compareAst({ a: 3 }, { a: "stringstuff" }));
    okAst(compareAst({ a: null }, { a: null }));
    nokAst(compareAst({ a: 2 }, { a: null }));
    nokAst(compareAst({ a: null }, { a: 2 }));
});
test("actual has more stuff", function () {
    okAst(compareAst({ i: "hello" }, { i: "hello", more: 2 }));
    okAst(compareAst({ i: "hello" }, { i: "hello", more: 2 }));
    nokAst(compareAst({ i: "different" }, { i: "hello", more: 2 }));
});
test("different values -> false", function () {
    nokAst(compareAst({ a: 2 }, { a: 3 }));
    nokAst(compareAst({ a: "hello" }, { a: null }));
});
test("should work for nested objects", function () {
    okAst(compareAst({ flat: 6, nested: { nested: {} } }, { flat: 6, nested: { nested: {} } }));
    nokAst(compareAst({ flat: 6, nested: { nested: { something: null } } }, { flat: 6, nested: { nested: {} } }));
});
test("should work for nested objects", function () {
    okAst(compareAst({ flat: 6, nested: { nested: {} } }, { flat: 6, nested: { nested: {} } }));
});
test("should not work for non-records", function () {
    nokAst(compareAst(null, {}));
    nokAst(compareAst({}, null));
    okAst(compareAst(null, null));
    okAst(compareAst(2, 2));
    nokAst(compareAst(3, 2));
    nokAst(compareAst(3, {}));
});
QUnit.module("AST");
astTests.forEach(function (n_s_t_e) {
    var name = n_s_t_e[0];
    var start = n_s_t_e[1];
    var expression = n_s_t_e[2];
    var expected = n_s_t_e[3];
    test(name, function () {
        var actual = vees.parser.parse(expression, { startRule: start });
        var comparisonSucceeded = compareAst(expected, actual);
        if (comparisonSucceeded) {
            okAst("");
        }
        else {
            console.log("Actual", actual);
            console.log("Expected", expected);
            okAst(false);
        }
    });
});
QUnit.module("AstTraversal");
test("should return correct class name", function () {
    var ast = vees.parser.parse("class CLASSNAME end");
    var trav = new vees.AstTraversal(ast[0]);
    equal("CLASSNAME", trav.className());
});
QUnit.module("Analyzer");
function analyze() {
    var sources = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        sources[_i - 0] = arguments[_i];
    }
    console.time("Parsing");
    var parsed = Array.prototype.map.call(sources, function (x, i) {
        return vees.parser.parse(x);
    });
    var analyzed = eiffel.semantics.analyze.apply(null, parsed);
    console.timeEnd("Parsing");
    return analyzed;
}
test("should pass", function () {
    analyze("class CLASSNAME end");
    ok(true);
});
function analyzerHasClass(analyzed, className) {
    var hasClass = analyzed.context.classSymbols.hasOwnProperty(className);
    if (!hasClass) {
        console.log(analyzed.context.classSymbols);
    }
    ok(hasClass, "doesn't have class " + className);
}
function classHasSymbol(analyzed, className, symbolName) {
    var classSymbol = analyzed.context.classSymbols[className];
    var hasSymbol = classSymbol.hasSymbol(symbolName);
    var errorMessage = "Class " + className + " does not have symbol " + symbolName;
    if (!hasSymbol) {
        console.log(errorMessage);
        console.log(analyzed.context.classSymbols[className]);
    }
    ok(hasSymbol, errorMessage);
    var symbol = classSymbol.resolveSymbol(symbolName);
    var actualName = symbol.lowerCaseName;
    equal(actualName.toLowerCase(), symbolName.toLowerCase(), "Symbol has wrong name");
    var actualLowerCaseName = symbol.lowerCaseName;
    equal(actualLowerCaseName, symbolName.toLowerCase(), "Symbol has wrong name");
}
test("should find symbol", function () {
    var analyzed = analyze("class CLASSNAME feature test: INTEGER end");
    ok(null != analyzed.context.classSymbols["CLASSNAME"]);
    classHasSymbol(analyzed, "CLASSNAME", "test");
});
test("Analyze two classes in one input", function () {
    var analyzed = analyze("class A feature test: INTEGER end class B end");
    analyzerHasClass(analyzed, "A");
    analyzerHasClass(analyzed, "B");
});
test("Analyze two classes two sources", function () {
    var analyzed = analyze("class A feature test: INTEGER end", "class B end");
    analyzerHasClass(analyzed, "A");
    analyzerHasClass(analyzed, "B");
});
test("Symbols exist", function () {
    var analyzed = analyze("class A feature test: STRING test2: INTEGER f3: INTEGER do end f4 do end end");
    classHasSymbol(analyzed, "A", "test");
    classHasSymbol(analyzed, "A", "test2");
    classHasSymbol(analyzed, "A", "f3");
    classHasSymbol(analyzed, "A", "f4");
    classHasSymbol(analyzed, "ANY", "Io");
});
test("Local variables exist", function () {
    var analyzed = analyze("class HASLOCALS feature abcd local var: INTEGER do end end");
    var local = analyzed.context.classSymbols["HASLOCALS"].routines["abcd"].localsAndParamsByName["var"];
    equal(local.name, "var", "Local variable is not named var");
});
test("Symbols resolve correctly in attributes", function () {
    var analyzed = analyze("class A feature a: A end", "class B feature a: A end class C feature b: B end");
    var aSym = analyzed.context.classSymbols["A"];
    var bSym = analyzed.context.classSymbols["B"];
    var cSym = analyzed.context.classSymbols["C"];
    ok(aSym.resolveSymbol("a").type.baseSymbol === aSym, "Type was not resolved");
    ok(bSym.resolveSymbol("a").type.baseSymbol === aSym, "Type was not resolved");
    ok(cSym.resolveSymbol("b").type.baseSymbol === bSym, "Type was not resolved");
});
test("Alias registers correctly", function () {
    var analyzed = analyze('class A feature b  alias "and then" (other: A): A do end end');
    ok(analyzed.context.classSymbols["A"].resolveSymbol("b") === analyzed.context.classSymbols["A"].aliases["and then"], "Alias was not registered");
    try {
        var analyzed = analyze('class A feature b  alias "and then" (other: A; other3: A): A do end end');
        ok(false, "Did not throw");
    }
    catch (e) {
        equal(e.message, "This alias requires exactly 1 parameters. b has 2", "Throws on wrong parameter count");
    }
});
test("Function return types resolve correctly", function () {
    var analyzed = analyze("class A feature b: A do end end");
    ok(analyzed.context.classSymbols["A"].resolveSymbol("b").type.baseSymbol === analyzed.context.classSymbols["A"], "Type was not resolved");
});
test("Local variables type resolves correctly", function () {
    var analyzed = analyze("class HASLOCALS feature abcd local var: INTEGER do end end");
    console.log("LOCAL VARS", analyzed);
    var local = analyzed.context.classSymbols["HASLOCALS"].routines["abcd"].localsAndParamsByName["var"];
    ok(local.type.baseSymbol === analyzed.context.classSymbols["INTEGER"], "Type was not resolved");
    equal(local.name, "var", "Local variable is not named var");
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QvYWxsLnRzIl0sIm5hbWVzIjpbImZhaWwiLCJjb21wYXJlQXN0IiwiY29tcGFyZUFzdC5jb21wYXJlIiwiY29tcGFyZUFzdC5jb21wYXJlLmRpZmYiLCJva0FzdCIsIm5va0FzdCIsImFuYWx5emUiLCJhbmFseXplckhhc0NsYXNzIiwiY2xhc3NIYXNTeW1ib2wiXSwibWFwcGluZ3MiOiJBQUFBLDRDQUE0QztBQUM1Qyw4Q0FBOEM7QUFDOUMseUNBQXlDO0FBQ3pDLDZDQUE2QztBQUM3QywwQ0FBMEM7QUFDMUMsK0NBQStDO0FBSy9DLFNBQVMsSUFBSSxDQUFDLE9BQU87SUFDbkJBLEVBQUVBLENBQUNBLEtBQUtBLEVBQUVBLE9BQU9BLENBQUNBLENBQUNBO0FBQ3JCQSxDQUFDQTtBQUNELEtBQUssQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDdEIsSUFBSSxDQUFDLHVCQUF1QixFQUFFO0lBQzVCLEVBQUUsQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUNkLENBQUMsQ0FBQyxDQUFDO0FBSUgsS0FBSyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUN2QixJQUFJLENBQUMsMEJBQTBCLEVBQUU7SUFDL0IsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ1gsQ0FBQyxDQUFDLENBQUM7QUFDSCxJQUFJLENBQUMsZUFBZSxFQUFFO0lBQ3BCLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDbEIsQ0FBQyxDQUFDLENBQUM7QUFDSCxJQUFJLENBQUMscUJBQXFCLEVBQUU7SUFDMUIsRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDeEIsQ0FBQyxDQUFDLENBQUM7QUFHSCxLQUFLLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBQ3hCLE9BQU8sQ0FBQyxPQUFPLENBQUMsVUFBVSxhQUFhO0lBRXJDLElBQUksQ0FBQyxVQUFVLEdBQUcsYUFBYSxDQUFDLFFBQVEsRUFB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SUFBSSxDQUFDLFVBQVUsS0FBSyxRQUFRLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsRUFBRSx1QkFBdUIsQ0FBQyxDQUFDO0FBQzVJLENBQUMsQ0FBQyxDQUFDO0FBRUgsSUFBSSxDQUFDLHlDQUF5QyxFQUFFO0lBQzlDLElBQUksUUFBUSxHQUFHLE9BQU8sQ0FBQyw0REFBNEQsQ0FBQyxDQUFDO0lBQ3JGLE9BQU8sQ0FBQyxHQUFHLENBQUMsWUFBWSxFQUFFLFFBQVEsQ0FBQyxDQUFDO0lBQ3BDLElBQUksS0FBSyxHQUFHLFFBQVEsQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLFdBQVcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxxQkFBcUIsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNyRyxFQUFFLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxVQUFVLEtBQUssUUFBUSxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsU0FBUyxDQUFDLEVBQUUsdUJBQXVCLENBQUMsQ0FBQztJQUVoRyxLQUFLLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxLQUFLLEVBQUUsaUNBQWlDLENBQUMsQ0FBQztBQUM5RCxDQUFDLENBQUMsQ0FBQyIsImZpbGUiOiJhbGwuanMiLCJzb3VyY2VSb290IjoiQzovVXNlcnMvQ2hyaXN0aWFuL0RvY3VtZW50cy9FVEgvZWlmZmVsLXBhcnNlci8iLCJzb3VyY2VzQ29udGVudCI6WyIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vdHlwaW5ncy90c2QuZC50c1wiIC8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vc3JjL3RzL2Zyb21KUy5kLnRzXCIgLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi9zcmMvdHMvYXN0LnRzXCIgLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi9zcmMvdHMvc3ltYm9scy50c1wiIC8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vc3JjL3RzL3V0aWwudHNcIiAvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uL3NyYy90cy9zZW1hbnRpY3MudHNcIiAvPlxuXG5cblxuXG5mdW5jdGlvbiBmYWlsKG1lc3NhZ2UpIHtcbiAgb2soZmFsc2UsIG1lc3NhZ2UpO1xufVxuUVVuaXQubW9kdWxlKFwiR3J1bnRcIik7XG50ZXN0KFwiZ2VuZXJhdGVkIGZpbGVzIGV4aXN0XCIsIGZ1bmN0aW9uKCkge1xuICBvayhva1Rlc3RzKTtcbn0pO1xuXG5cblxuUVVuaXQubW9kdWxlKFwiUGFyc2VyXCIpO1xudGVzdChcInRoZSBiYXNlIGZ1bmN0aW9uIGV4aXN0c1wiLCBmdW5jdGlvbigpIHtcbiAgb2sodmVlcyk7XG59KTtcbnRlc3QoXCJwYXJzZXIgZXhpc3RzXCIsIGZ1bmN0aW9uKCkge1xuICBvayh2ZWVzLnBhcnNlcik7XG59KTtcbnRlc3QoXCJwYXJzZXIucGFyc2UgZXhpc3RzXCIsIGZ1bmN0aW9uKCkge1xuICBvayh2ZWVzLnBhcnNlci5wYXJzZSk7XG59KTtcblxuXG5RVW5pdC5tb2R1bGUoXCJPS1Rlc3RzXCIpO1xub2tUZXN0cy5mb3JFYWNoKGZ1bmN0aW9uIChmaWxlX19jb250ZW50KSB7XG5cbiAgdGVzdChcIlBhcnNpbmcgXCIgKyBmaWxlX19jb250ZW50LmZpbGVuYW1lLCBmdW5jdGlvbigpIHtcbiAgICB0cnkge1xuICAgICAgdmVlcy5wYXJzZXIucGFyc2UoZmlsZV9fY29udGVudC5jb250ZW50KTtcbiAgICAgIG9rKHRydWUpO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgZmFpbChlLm1lc3NhZ2UgKyBcIlxcbkxpbmU6IFwiICsgZS5saW5lICsgXCJcXG5Db2x1bW46IFwiICsgZS5jb2x1bW4pO1xuICAgIH1cbiAgfSk7XG59KTtcblxuXG5cbnZhciBhc3RUZXN0cyA9IFtcbiAgLypcblxuICBbXG4gICAgXCJUcnVlIHBhcnNlc1wiLFxuICAgIFwiRXhwcmVzc2lvblwiLFxuICAgIFwiVHJ1ZVwiLFxuICAgIHtcbiAgICAgIG5vZGVUeXBlOiBcImxpdGVyYWwuYm9vbFwiLFxuICAgICAgdmFsdWU6IHRydWUsXG4gICAgfSxcbiAgXSxcblxuICAqL1xuICBbXG4gICAgXCJUcnVlIHBhcnNlc1wiLFxuICAgIFwiRXhwcmVzc2lvblwiLFxuICAgIFwiVHJ1ZVwiLFxuICAgIHtcbiAgICAgIHZhbHVlOiB0cnVlLFxuICAgICAgc3RhcnQ6IHtvZmZzZXQ6IDB9LFxuICAgICAgZW5kOiB7fSxcbiAgICB9LFxuICBdLFxuXG4gIFtcbiAgICBcIkZhbHNlIHBhcnNlc1wiLFxuICAgIFwiRXhwcmVzc2lvblwiLFxuICAgIFwiRmFsc2VcIixcbiAgICB7XG4gICAgICBfX2luc3RhbmNlb2Y6IGVpZmZlbC5hc3QuQm9vbGVhbkxpdGVyYWwsXG4gICAgICB2YWx1ZTogZmFsc2UsXG4gICAgICBzdGFydDoge30sXG4gICAgICBlbmQ6IHsgb2Zmc2V0OiA1fSxcbiAgICB9LFxuICBdLFxuXG4gIFtcbiAgICBcIjEgcGFyc2VzXCIsXG4gICAgXCJFeHByZXNzaW9uXCIsXG4gICAgXCIxXCIsXG4gICAge1xuICAgICAgdmFsdWU6IDEsXG4gICAgICBzdGFydDoge30sXG4gICAgICBlbmQ6IHt9LFxuICAgIH0sXG4gIF0sXG4gIFtcbiAgICBcIicxJyBwYXJzZXNcIixcbiAgICBcIkV4cHJlc3Npb25cIixcbiAgICBcIicxJ1wiLFxuICAgIHtcbiAgICAgIHZhbHVlOiBcIjFcIixcbiAgICAgIHN0YXJ0OiB7fSxcbiAgICAgIGVuZDoge30sXG4gICAgfSxcbiAgXSxcblxuICBbXG4gICAgXCIlbiBwYXJzZXNcIixcbiAgICBcIkV4cHJlc3Npb25cIixcbiAgICAnXCIlbiVcIlwiJyxcbiAgICB7XG4gICAgICB2YWx1ZTogJyVuJVwiJyxcbiAgICAgIHN0YXJ0OiB7fSxcbiAgICAgIGVuZDoge30sXG4gICAgfSxcbiAgXSxcblxuICBbXG4gICAgXCJWb2lkIHBhcnNlc1wiLFxuICAgIFwiRXhwcmVzc2lvblwiLFxuICAgICdWb2lkJyxcbiAgICB7XG4gICAgICBzdGFydDoge30sXG4gICAgICBlbmQ6IHt9LFxuICAgIH0sXG4gIF0sXG5cbiBdO1xuXG5pbnRlcmZhY2UgRXJyb3JEaWZmIHtcbiAgcXVlcnk6IHN0cmluZztcbiAgcGFyYW1zOiBhbnlbXTtcbn1cblxuZnVuY3Rpb24gY29tcGFyZUFzdChleHBlY3RlZDogYW55LCBhY3R1YWw6IGFueSkge1xuXG4gIHZhciBub0RpZmZlcmVuY2VzID0gdHJ1ZTtcbiAgdmFyIGRpZmZlcmVuY2VzOiBFcnJvckRpZmZbXSA9IFtdO1xuXG4gIGZ1bmN0aW9uIGNvbXBhcmUoZXhwZWN0ZWQsIGFjdHVhbCwgcXVlcnkpIHtcbiAgICBmdW5jdGlvbiBkaWZmKC4uLnBhcmFtczogYW55W10pIHtcbiAgICAgIG5vRGlmZmVyZW5jZXMgPSBmYWxzZTtcbiAgICAgIGRpZmZlcmVuY2VzLnB1c2goe3F1ZXJ5OiBxdWVyeSwgcGFyYW1zOiBwYXJhbXN9KTtcbiAgICB9XG4gICAgaWYgKGV4cGVjdGVkID09PSBhY3R1YWwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoZXhwZWN0ZWQgPT09IG51bGwgJiYgYWN0dWFsICE9PSBudWxsKSB7XG4gICAgICAgIGRpZmYoXCJleHBlY3RlZCBpcyBudWxsLCBhY3R1YWwgaXMgbm90XCIsIGFjdHVhbCk7XG4gICAgfVxuICAgIGlmIChleHBlY3RlZCAhPT0gbnVsbCAmJiBhY3R1YWwgPT0gbnVsbCkge1xuICAgICAgZGlmZihcImFjdHVhbCBpcyBudWxsIHdoZW4gaXQgc2hvdWxkIGhhdmUgYmVlblwiLCBhY3R1YWwpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgZXhwZWN0ZWQgIT09IHR5cGVvZiBhY3R1YWwpIHtcbiAgICAgIGRpZmYoXCJkaWZmZXJlbnQgdHlwZXNcIiwgXCJ0eXBlb2YgZXhwZWN0ZWQgXCIgKyB0eXBlb2YgZXhwZWN0ZWQsIFwidHlwZW9mIGFjdHVhbCBcIiArIHR5cGVvZiBhY3R1YWwpXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZXhwZWN0ZWQpKSB7XG4gICAgICBpZiAoIUFycmF5LmlzQXJyYXkoYWN0dWFsKSkge1xuICAgICAgICBkaWZmKFwiZXhwZWN0ZWQgaXMgb2JqZWN0LCBhY3R1YWwgaXMgbm90XCIsIGFjdHVhbCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIC8vIGJvdGggYXJlIGFycmF5c1xuICAgICAgaWYgKGV4cGVjdGVkLmxlbmd0aCA+IGFjdHVhbC5sZW5ndGgpIHtcbiAgICAgICAgZGlmZihcImV4cGVjdGVkIGlzIGxvbmdlclwiLCBcImV4cGVjdGVkOiBcIiArIGV4cGVjdGVkLmxlbmd0aCwgXCJhY3R1YWw6IFwiICsgYWN0dWFsLmxlbmd0aCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgZXhwZWN0ZWQuZm9yRWFjaChmdW5jdGlvbih4LCB4X2kpIHtcbiAgICAgICAgY29tcGFyZSh4LCBhY3R1YWxbeF9pXSwgcXVlcnkgKyBcIltcIiArIHhfaSArIFwiXVwiKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgZXhwZWN0ZWQgPT09ICdvYmplY3QnKSB7XG4gICAgICBmb3IgKHZhciBrZXkgaW4gZXhwZWN0ZWQpIHtcbiAgICAgICAgaWYgKGV4cGVjdGVkLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICBpZiAoa2V5ID09PSBcIl9faW5zdGFuY2VvZlwiKSB7XG4gICAgICAgICAgICBpZiAoIShhY3R1YWwgaW5zdGFuY2VvZiBleHBlY3RlZFtrZXldKSkge1xuICAgICAgICAgICAgICBkaWZmKFwiYWN0dWFsIGhhcyB3cm9uZyB0eXBlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgaWYgKGFjdHVhbC5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICAgIGNvbXBhcmUoZXhwZWN0ZWRba2V5XSwgYWN0dWFsW2tleV0sIHF1ZXJ5ICsgXCJbXCIgKyBrZXkgKyBcIl1cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgZGlmZihcImFjdHVhbCBpcyBtaXNzaW5nIGtleSBcIiArIGtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZWxzZSB7XG4gICAgICBkaWZmKFwiZGlmZmVyZW50IHZhbHVlc1wiLCBcIkV4cGVjdGVkOiBcIiwgZXhwZWN0ZWQsIFwiQWN0dWFsIFwiLCBhY3R1YWwpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGRpZmYoXCJ1bmtub3duIGRpZmZlcmVuY2VcIik7XG4gIH1cblxuICBjb21wYXJlKGV4cGVjdGVkLCBhY3R1YWwsIFwidGhpc1wiKTtcblxuICBpZiAoZGlmZmVyZW5jZXMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIGRpZmZlcmVuY2VzLmZvckVhY2goZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgY29uc29sZS5ncm91cChkLnF1ZXJ5KTtcbiAgICAgICAgY29uc29sZS5lcnJvci5hcHBseShjb25zb2xlLCBkLnBhcmFtcyk7XG4gICAgICAgIGNvbnNvbGUuZ3JvdXBFbmQoKTtcbiAgICAgIH0pXG4gICAgfVxuICB9XG4gIGVsc2Uge1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbmZ1bmN0aW9uIG9rQXN0KGVycm9yRnVuY3Rpb24pIHtcbiAgaWYgKGVycm9yRnVuY3Rpb24pIHtcbiAgICBlcnJvckZ1bmN0aW9uKCk7XG4gICAgb2soZmFsc2UsIFwiQVNUIHdhcyBub3QgZXF1YWxcIik7XG4gIH1cbiAgZWxzZSB7XG4gICAgb2sodHJ1ZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gbm9rQXN0KGVycm9yRnVuY3Rpb24pIHtcbiAgaWYgKGVycm9yRnVuY3Rpb24pIHtcbiAgICBvayh0cnVlKTtcbiAgfVxuICBlbHNlIHtcbiAgICBlcnJvckZ1bmN0aW9uKCk7XG4gICAgb2soZmFsc2UsIFwiQVNUIHdhcyBub3QgZXF1YWxcIik7XG4gIH1cbn1cblxuUVVuaXQubW9kdWxlKFwiQVNUIGNvbXBhcmlzb24gZnVuY3Rpb25cIik7XG50ZXN0KFwic2hvdWxkIHdvcmsgZm9yIGVtcHR5IG9iamVjdHNcIiwgZnVuY3Rpb24oKSB7XG4gIG9rQXN0KGNvbXBhcmVBc3Qoe30sIHt9KSk7XG59KTtcblxudGVzdChcInNob3VsZCB3b3JrIGZvciBzaW5nbGUgdmFsdWVzXCIsIGZ1bmN0aW9uKCkge1xuICBva0FzdChjb21wYXJlQXN0KHthOiAyfSwge2E6IDJ9KSk7XG4gIG5va0FzdChjb21wYXJlQXN0KHthOiAzfSwge2E6IDJ9KSk7XG4gIG5va0FzdChjb21wYXJlQXN0KHthOiAzfSwge2E6IFwic3RyaW5nc3R1ZmZcIn0pKTtcbiAgb2tBc3QoY29tcGFyZUFzdCh7YTogbnVsbH0sIHthOiBudWxsfSkpO1xuICBub2tBc3QoY29tcGFyZUFzdCh7YTogMn0sIHthOiBudWxsfSkpO1xuICBub2tBc3QoY29tcGFyZUFzdCh7YTogbnVsbH0sIHthOiAyfSkpO1xufSk7XG5cbnRlc3QoXCJhY3R1YWwgaGFzIG1vcmUgc3R1ZmZcIiwgZnVuY3Rpb24oKSB7XG4gIG9rQXN0KGNvbXBhcmVBc3Qoe2k6IFwiaGVsbG9cIn0sIHtpOiBcImhlbGxvXCIsIG1vcmU6IDJ9KSk7XG4gIG9rQXN0KGNvbXBhcmVBc3Qoe2k6IFwiaGVsbG9cIn0sIHtpOiBcImhlbGxvXCIsIG1vcmU6IDJ9KSk7XG4gIG5va0FzdChjb21wYXJlQXN0KHtpOiBcImRpZmZlcmVudFwifSwge2k6IFwiaGVsbG9cIiwgbW9yZTogMn0pKTtcbn0pO1xuXG50ZXN0KFwiZGlmZmVyZW50IHZhbHVlcyAtPiBmYWxzZVwiLCBmdW5jdGlvbigpIHtcbiAgbm9rQXN0KGNvbXBhcmVBc3Qoe2E6IDJ9LCB7YTogM30pKTtcbiAgbm9rQXN0KGNvbXBhcmVBc3Qoe2E6IFwiaGVsbG9cIn0sIHthOiBudWxsfSkpO1xufSk7XG5cbnRlc3QoXCJzaG91bGQgd29yayBmb3IgbmVzdGVkIG9iamVjdHNcIiwgZnVuY3Rpb24oKSB7XG4gIG9rQXN0KGNvbXBhcmVBc3Qoe2ZsYXQ6IDYsIG5lc3RlZDoge25lc3RlZDoge319fSwge2ZsYXQ6IDYsIG5lc3RlZDoge25lc3RlZDoge319fSkpO1xuICBub2tBc3QoY29tcGFyZUFzdCh7ZmxhdDogNiwgbmVzdGVkOiB7bmVzdGVkOiB7IHNvbWV0aGluZzogbnVsbH19fSwge2ZsYXQ6IDYsIG5lc3RlZDoge25lc3RlZDoge319fSkpO1xufSk7XG5cbnRlc3QoXCJzaG91bGQgd29yayBmb3IgbmVzdGVkIG9iamVjdHNcIiwgZnVuY3Rpb24oKSB7XG4gIG9rQXN0KGNvbXBhcmVBc3Qoe2ZsYXQ6IDYsIG5lc3RlZDoge25lc3RlZDoge319fSwge2ZsYXQ6IDYsIG5lc3RlZDoge25lc3RlZDoge319fSkpO1xufSk7XG5cbnRlc3QoXCJzaG91bGQgbm90IHdvcmsgZm9yIG5vbi1yZWNvcmRzXCIsIGZ1bmN0aW9uKCkge1xuICBub2tBc3QoY29tcGFyZUFzdChudWxsLCB7fSkpO1xuICBub2tBc3QoY29tcGFyZUFzdCh7fSwgbnVsbCkpO1xuICBva0FzdChjb21wYXJlQXN0KG51bGwsIG51bGwpKTtcbiAgb2tBc3QoY29tcGFyZUFzdCgyLCAyKSk7XG4gIG5va0FzdChjb21wYXJlQXN0KDMsIDIpKTtcbiAgbm9rQXN0KGNvbXBhcmVBc3QoMywge30pKTtcbn0pO1xuXG5RVW5pdC5tb2R1bGUoXCJBU1RcIik7XG5hc3RUZXN0cy5mb3JFYWNoKGZ1bmN0aW9uKG5fc190X2UpIHtcbiAgdmFyIG5hbWU6IHN0cmluZyA9IDxzdHJpbmc+IG5fc190X2VbMF07XG4gIHZhciBzdGFydCA9IG5fc190X2VbMV07XG4gIHZhciBleHByZXNzaW9uID0gbl9zX3RfZVsyXTtcbiAgdmFyIGV4cGVjdGVkID0gbl9zX3RfZVszXTtcblxuICB0ZXN0KG5hbWUsIGZ1bmN0aW9uKCkge1xuICAgIHZhciBhY3R1YWwgPSB2ZWVzLnBhcnNlci5wYXJzZShleHByZXNzaW9uLCB7c3RhcnRSdWxlOiBzdGFydH0pO1xuICAgIHZhciBjb21wYXJpc29uU3VjY2VlZGVkID0gY29tcGFyZUFzdChleHBlY3RlZCwgYWN0dWFsKTtcbiAgICBpZiAoY29tcGFyaXNvblN1Y2NlZWRlZCkge1xuICAgICAgICBva0FzdChcIlwiKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZyhcIkFjdHVhbFwiLCBhY3R1YWwpO1xuICAgICAgY29uc29sZS5sb2coXCJFeHBlY3RlZFwiLCBleHBlY3RlZCk7XG4gICAgICBva0FzdChmYWxzZSk7XG4gICAgfVxuICB9KTtcbn0pO1xuXG5RVW5pdC5tb2R1bGUoXCJBc3RUcmF2ZXJzYWxcIik7XG50ZXN0KFwic2hvdWxkIHJldHVybiBjb3JyZWN0IGNsYXNzIG5hbWVcIiwgZnVuY3Rpb24oKSB7XG4gIHZhciBhc3QgPSB2ZWVzLnBhcnNlci5wYXJzZShcImNsYXNzIENMQVNTTkFNRSBlbmRcIik7XG4gIHZhciB0cmF2ID0gbmV3IHZlZXMuQXN0VHJhdmVyc2FsKGFzdFswXSk7XG4gIGVxdWFsKFwiQ0xBU1NOQU1FXCIsIHRyYXYuY2xhc3NOYW1lKCkpO1xufSk7XG5cblFVbml0Lm1vZHVsZShcIkFuYWx5emVyXCIpO1xuXG5mdW5jdGlvbiBhbmFseXplKC4uLnNvdXJjZXM6IHN0cmluZ1tdKSB7XG4gIGNvbnNvbGUudGltZShcIlBhcnNpbmdcIilcbiAgdmFyIHBhcnNlZCA9IEFycmF5LnByb3RvdHlwZS5tYXAuY2FsbChzb3VyY2VzLCBmdW5jdGlvbiAoeCwgaSkgeyByZXR1cm4gdmVlcy5wYXJzZXIucGFyc2UoeCl9KTtcbiAgdmFyIGFuYWx5emVkID0gZWlmZmVsLnNlbWFudGljcy5hbmFseXplLmFwcGx5KG51bGwsIHBhcnNlZCk7XG4gIGNvbnNvbGUudGltZUVuZChcIlBhcnNpbmdcIilcbiAgcmV0dXJuIGFuYWx5emVkO1xufVxudGVzdChcInNob3VsZCBwYXNzXCIsIGZ1bmN0aW9uICgpIHtcbiAgYW5hbHl6ZShcImNsYXNzIENMQVNTTkFNRSBlbmRcIik7XG4gIG9rKHRydWUpO1xufSk7XG5cblxuZnVuY3Rpb24gYW5hbHl6ZXJIYXNDbGFzcyhhbmFseXplZCwgY2xhc3NOYW1lKSB7XG4gIHZhciBoYXNDbGFzcyA9IGFuYWx5emVkLmNvbnRleHQuY2xhc3NTeW1ib2xzLmhhc093blByb3BlcnR5KGNsYXNzTmFtZSk7XG4gIGlmICghaGFzQ2xhc3MpIHtcbiAgICBjb25zb2xlLmxvZyhhbmFseXplZC5jb250ZXh0LmNsYXNzU3ltYm9scyk7XG4gIH1cbiAgb2soaGFzQ2xhc3MsIFwiZG9lc24ndCBoYXZlIGNsYXNzIFwiICsgY2xhc3NOYW1lKTtcbn1cblxuZnVuY3Rpb24gY2xhc3NIYXNTeW1ib2woYW5hbHl6ZWQsIGNsYXNzTmFtZSwgc3ltYm9sTmFtZSkge1xuICB2YXIgY2xhc3NTeW1ib2wgPSBhbmFseXplZC5jb250ZXh0LmNsYXNzU3ltYm9sc1tjbGFzc05hbWVdO1xuICB2YXIgaGFzU3ltYm9sID0gY2xhc3NTeW1ib2wuaGFzU3ltYm9sKHN5bWJvbE5hbWUpO1xuICB2YXIgZXJyb3JNZXNzYWdlID0gXCJDbGFzcyBcIiArIGNsYXNzTmFtZSArIFwiIGRvZXMgbm90IGhhdmUgc3ltYm9sIFwiICsgc3ltYm9sTmFtZTtcbiAgaWYgKCFoYXNTeW1ib2wpIHtcbiAgICBjb25zb2xlLmxvZyhlcnJvck1lc3NhZ2UpO1xuICAgIGNvbnNvbGUubG9nKGFuYWx5emVkLmNvbnRleHQuY2xhc3NTeW1ib2xzW2NsYXNzTmFtZV0pO1xuICB9XG4gIG9rKGhhc1N5bWJvbCwgZXJyb3JNZXNzYWdlKTtcblxuICB2YXIgc3ltYm9sID0gY2xhc3NTeW1ib2wucmVzb2x2ZVN5bWJvbChzeW1ib2xOYW1lKTtcbiAgdmFyIGFjdHVhbE5hbWUgPSBzeW1ib2wubG93ZXJDYXNlTmFtZTtcbiAgZXF1YWwoYWN0dWFsTmFtZS50b0xvd2VyQ2FzZSgpLCBzeW1ib2xOYW1lLnRvTG93ZXJDYXNlKCksIFwiU3ltYm9sIGhhcyB3cm9uZyBuYW1lXCIpO1xuICB2YXIgYWN0dWFsTG93ZXJDYXNlTmFtZSA9IHN5bWJvbC5sb3dlckNhc2VOYW1lO1xuICBlcXVhbChhY3R1YWxMb3dlckNhc2VOYW1lLCBzeW1ib2xOYW1lLnRvTG93ZXJDYXNlKCksIFwiU3ltYm9sIGhhcyB3cm9uZyBuYW1lXCIpO1xufVxuXG50ZXN0KFwic2hvdWxkIGZpbmQgc3ltYm9sXCIsIGZ1bmN0aW9uKCkge1xuICB2YXIgYW5hbHl6ZWQgPSBhbmFseXplKFwiY2xhc3MgQ0xBU1NOQU1FIGZlYXR1cmUgdGVzdDogSU5URUdFUiBlbmRcIik7XG4gIG9rKG51bGwgIT0gYW5hbHl6ZWQuY29udGV4dC5jbGFzc1N5bWJvbHNbXCJDTEFTU05BTUVcIl0pO1xuICBjbGFzc0hhc1N5bWJvbChhbmFseXplZCwgXCJDTEFTU05BTUVcIiwgXCJ0ZXN0XCIpO1xufSk7XG5cblxudGVzdChcIkFuYWx5emUgdHdvIGNsYXNzZXMgaW4gb25lIGlucHV0XCIsIGZ1bmN0aW9uKCkge1xuICB2YXIgYW5hbHl6ZWQgPSBhbmFseXplKFwiY2xhc3MgQSBmZWF0dXJlIHRlc3Q6IElOVEVHRVIgZW5kIGNsYXNzIEIgZW5kXCIpO1xuICBhbmFseXplckhhc0NsYXNzKGFuYWx5emVkLCBcIkFcIik7XG4gIGFuYWx5emVySGFzQ2xhc3MoYW5hbHl6ZWQsIFwiQlwiKTtcbn0pO1xuXG50ZXN0KFwiQW5hbHl6ZSB0d28gY2xhc3NlcyB0d28gc291cmNlc1wiLCBmdW5jdGlvbigpIHtcbiAgdmFyIGFuYWx5emVkID0gYW5hbHl6ZShcImNsYXNzIEEgZmVhdHVyZSB0ZXN0OiBJTlRFR0VSIGVuZFwiLCBcImNsYXNzIEIgZW5kXCIpO1xuICBhbmFseXplckhhc0NsYXNzKGFuYWx5emVkLCBcIkFcIik7XG4gIGFuYWx5emVySGFzQ2xhc3MoYW5hbHl6ZWQsIFwiQlwiKTtcbn0pO1xuXG50ZXN0KFwiU3ltYm9scyBleGlzdFwiLCBmdW5jdGlvbigpIHtcbiAgdmFyIGFuYWx5emVkID0gYW5hbHl6ZShcImNsYXNzIEEgZmVhdHVyZSB0ZXN0OiBTVFJJTkcgdGVzdDI6IElOVEVHRVIgZjM6IElOVEVHRVIgZG8gZW5kIGY0IGRvIGVuZCBlbmRcIik7XG4gIGNsYXNzSGFzU3ltYm9sKGFuYWx5emVkLCBcIkFcIiwgXCJ0ZXN0XCIpO1xuICBjbGFzc0hhc1N5bWJvbChhbmFseXplZCwgXCJBXCIsIFwidGVzdDJcIik7XG4gIGNsYXNzSGFzU3ltYm9sKGFuYWx5emVkLCBcIkFcIiwgXCJmM1wiKTtcbiAgY2xhc3NIYXNTeW1ib2woYW5hbHl6ZWQsIFwiQVwiLCBcImY0XCIpO1xuICBjbGFzc0hhc1N5bWJvbChhbmFseXplZCwgXCJBTllcIiwgXCJJb1wiKTtcblxufSk7XG5cbnRlc3QoXCJMb2NhbCB2YXJpYWJsZXMgZXhpc3RcIiwgZnVuY3Rpb24gKCkge1xuICB2YXIgYW5hbHl6ZWQgPSBhbmFseXplKFwiY2xhc3MgSEFTTE9DQUxTIGZlYXR1cmUgYWJjZCBsb2NhbCB2YXI6IElOVEVHRVIgZG8gZW5kIGVuZFwiKTtcbiAgdmFyIGxvY2FsID0gYW5hbHl6ZWQuY29udGV4dC5jbGFzc1N5bWJvbHNbXCJIQVNMT0NBTFNcIl0ucm91dGluZXNbXCJhYmNkXCJdLmxvY2Fsc0FuZFBhcmFtc0J5TmFtZVtcInZhclwiXTtcbiAgZXF1YWwobG9jYWwubmFtZSwgXCJ2YXJcIiwgXCJMb2NhbCB2YXJpYWJsZSBpcyBub3QgbmFtZWQgdmFyXCIpO1xufSk7XG5cblxudGVzdChcIlN5bWJvbHMgcmVzb2x2ZSBjb3JyZWN0bHkgaW4gYXR0cmlidXRlc1wiLCBmdW5jdGlvbiAoKSB7XG4gIHZhciBhbmFseXplZCA9IGFuYWx5emUoXCJjbGFzcyBBIGZlYXR1cmUgYTogQSBlbmRcIiwgXCJjbGFzcyBCIGZlYXR1cmUgYTogQSBlbmQgY2xhc3MgQyBmZWF0dXJlIGI6IEIgZW5kXCIpO1xuICB2YXIgYVN5bSA9IGFuYWx5emVkLmNvbnRleHQuY2xhc3NTeW1ib2xzW1wiQVwiXTtcbiAgdmFyIGJTeW0gPSBhbmFseXplZC5jb250ZXh0LmNsYXNzU3ltYm9sc1tcIkJcIl07XG4gIHZhciBjU3ltID0gYW5hbHl6ZWQuY29udGV4dC5jbGFzc1N5bWJvbHNbXCJDXCJdO1xuICBvayhhU3ltLnJlc29sdmVTeW1ib2woXCJhXCIpLnR5cGUuYmFzZVN5bWJvbCA9PT0gYVN5bSwgXCJUeXBlIHdhcyBub3QgcmVzb2x2ZWRcIik7XG4gIG9rKGJTeW0ucmVzb2x2ZVN5bWJvbChcImFcIikudHlwZS5iYXNlU3ltYm9sID09PSBhU3ltLCBcIlR5cGUgd2FzIG5vdCByZXNvbHZlZFwiKTtcbiAgb2soY1N5bS5yZXNvbHZlU3ltYm9sKFwiYlwiKS50eXBlLmJhc2VTeW1ib2wgPT09IGJTeW0sIFwiVHlwZSB3YXMgbm90IHJlc29sdmVkXCIpO1xufSk7XG5cblxudGVzdChcIkFsaWFzIHJlZ2lzdGVycyBjb3JyZWN0bHlcIiwgZnVuY3Rpb24gKCkge1xuICB2YXIgYW5hbHl6ZWQgPSBhbmFseXplKCdjbGFzcyBBIGZlYXR1cmUgYiAgYWxpYXMgXCJhbmQgdGhlblwiIChvdGhlcjogQSk6IEEgZG8gZW5kIGVuZCcpO1xuXG4gIG9rKGFuYWx5emVkLmNvbnRleHQuY2xhc3NTeW1ib2xzW1wiQVwiXS5yZXNvbHZlU3ltYm9sKFwiYlwiKSA9PT0gYW5hbHl6ZWQuY29udGV4dC5jbGFzc1N5bWJvbHNbXCJBXCJdLmFsaWFzZXNbXCJhbmQgdGhlblwiXSwgXCJBbGlhcyB3YXMgbm90IHJlZ2lzdGVyZWRcIik7XG4gIHRyeXtcbiAgICB2YXIgYW5hbHl6ZWQgPSBhbmFseXplKCdjbGFzcyBBIGZlYXR1cmUgYiAgYWxpYXMgXCJhbmQgdGhlblwiIChvdGhlcjogQTsgb3RoZXIzOiBBKTogQSBkbyBlbmQgZW5kJyk7XG4gICAgb2soZmFsc2UsIFwiRGlkIG5vdCB0aHJvd1wiKTtcbiAgfSBjYXRjaCAoZSl7XG4gICAgZXF1YWwoZS5tZXNzYWdlLCBcIlRoaXMgYWxpYXMgcmVxdWlyZXMgZXhhY3RseSAxIHBhcmFtZXRlcnMuIGIgaGFzIDJcIiwgIFwiVGhyb3dzIG9uIHdyb25nIHBhcmFtZXRlciBjb3VudFwiKTtcbiAgfVxufSk7XG5cblxudGVzdChcIkZ1bmN0aW9uIHJldHVybiB0eXBlcyByZXNvbHZlIGNvcnJlY3RseVwiLCBmdW5jdGlvbiAoKSB7XG4gIHZhciBhbmFseXplZCA9IGFuYWx5emUoXCJjbGFzcyBBIGZlYXR1cmUgYjogQSBkbyBlbmQgZW5kXCIpO1xuICBvayhhbmFseXplZC5jb250ZXh0LmNsYXNzU3ltYm9sc1tcIkFcIl0ucmVzb2x2ZVN5bWJvbChcImJcIikudHlwZS5iYXNlU3ltYm9sID09PSBhbmFseXplZC5jb250ZXh0LmNsYXNzU3ltYm9sc1tcIkFcIl0sIFwiVHlwZSB3YXMgbm90IHJlc29sdmVkXCIpO1xufSk7XG5cbnRlc3QoXCJMb2NhbCB2YXJpYWJsZXMgdHlwZSByZXNvbHZlcyBjb3JyZWN0bHlcIiwgZnVuY3Rpb24gKCkge1xuICB2YXIgYW5hbHl6ZWQgPSBhbmFseXplKFwiY2xhc3MgSEFTTE9DQUxTIGZlYXR1cmUgYWJjZCBsb2NhbCB2YXI6IElOVEVHRVIgZG8gZW5kIGVuZFwiKTtcbiAgY29uc29sZS5sb2coXCJMT0NBTCBWQVJTXCIsIGFuYWx5emVkKTtcbiAgdmFyIGxvY2FsID0gYW5hbHl6ZWQuY29udGV4dC5jbGFzc1N5bWJvbHNbXCJIQVNMT0NBTFNcIl0ucm91dGluZXNbXCJhYmNkXCJdLmxvY2Fsc0FuZFBhcmFtc0J5TmFtZVtcInZhclwiXTtcbiAgb2sobG9jYWwudHlwZS5iYXNlU3ltYm9sID09PSBhbmFseXplZC5jb250ZXh0LmNsYXNzU3ltYm9sc1tcIklOVEVHRVJcIl0sIFwiVHlwZSB3YXMgbm90IHJlc29sdmVkXCIpO1xuXG4gIGVxdWFsKGxvY2FsLm5hbWUsIFwidmFyXCIsIFwiTG9jYWwgdmFyaWFibGUgaXMgbm90IG5hbWVkIHZhclwiKTtcbn0pO1xuIl19